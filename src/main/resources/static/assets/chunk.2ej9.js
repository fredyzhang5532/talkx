var F=(b,f,e)=>new Promise((v,n)=>{var m=o=>{try{c(e.next(o))}catch(x){n(x)}},s=o=>{try{c(e.throw(o))}catch(x){n(x)}},c=o=>o.done?v(o.value):Promise.resolve(o.value).then(m,s);c((e=e.apply(b,f)).next())});import{_ as S,u as j,g,i as P,c as T,q as V,t as q,o as d,a as r,F as N,x as R,w as h,z as A,A as C,d as $,f as M,D as B,e as a,B as E,v as G,C as W,G as D,k as O,l as U,a2 as H,n as J,s as K,au as Q,E as X,av as Y}from"./bundle.0.0.2.js?v=0.6624411655913371";import{N as Z}from"./chunk.2ej23.js";const ee=["onClick"],te={key:0},se={key:0,class:"tab_item item tab_list"},ae=["onClick"],ne={key:0},oe={__name:"index",props:{data:Array,tIndex:Number|String,width:{type:Number,default:100}},emits:["tabChange"],setup(b,{expose:f,emit:e}){j(u=>({"675a1e9d":I.value}));const v=e,n=b,m=g(7),s=g(null),c=g(!1),o=P("resize"),x=()=>{if(!s.value)return;const u=parseInt(window.getComputedStyle(s.value).width);let l=Math.floor(u/n.width);o.smallRef.value||(l=l-1),m.value=n.data.length>l?l-1:l};o.change(x);const I=T(()=>n.width+"px"),t=T(()=>({tabs:n.data.slice(0,m.value),list:n.data.slice(m.value)})),y=()=>{c.value=!1},p=u=>{v("tabChange",u),c.value=!1};return f({bodyClick:y}),V(()=>{x(),document.addEventListener("click",y)}),q(()=>{document.removeEventListener("click",y)}),(u,l)=>(d(),r("div",{class:"tabs_wrapper",ref_key:"wrapper",ref:s},[(d(!0),r(N,null,R(t.value.tabs,i=>(d(),r("div",{class:h(["tab_item item",{active:n.tIndex==i.id}]),key:i,onClick:z=>p(i)},[A(C(i.label)+" ",1),i.count?(d(),r("span",te," ("+C(i.count)+")",1)):$("",!0)],10,ee))),128)),t.value.tabs.length>5?(d(),r("div",se,[M(G(Z),{placement:"bottom",show:c.value,style:{padding:"4px","border-radius":"0px","background-color":"var(--tp_userList_bgcolor)"}},{trigger:B(()=>[a("div",{class:"text",onMouseover:l[0]||(l[0]=i=>c.value=!0),onClick:l[1]||(l[1]=E(i=>c.value=!0,["stop"]))},l[2]||(l[2]=[a("span",{class:"iconfont icon-option-horizontal"},null,-1)]),32)]),default:B(()=>[a("div",{class:h(["list_wrapper",{small:G(o).smallRef.value}])},[(d(!0),r(N,null,R(t.value.list,(i,z)=>(d(),r("div",{class:h(["tab_li item",{active:n.tIndex==i.id}]),key:z,onClick:w=>p(i)},[A(C(i.label)+" ",1),i.count?(d(),r("span",ne," ("+C(i.count)+")",1)):$("",!0)],10,ae))),128))],2)]),_:1},8,["show"])])):$("",!0)],512))}},le=S(oe,[["__scopeId","data-v-cff83296"]]);const ie={class:"FriendCard"},de={class:"avater"},re=["src"],ce={class:"name"},ue={class:"desc"},_e={class:"tag"},ve={key:0,class:"badge"},pe={key:1,class:"badge"},fe={key:2,class:"badge"},me={__name:"FriendCard",props:["data"],emits:["collect"],setup(b,{emit:f}){const e=b,v=f,n=()=>v("collect",e.data);return(m,s)=>(d(),r("div",ie,[a("div",de,[a("img",{src:e.data.avatar,alt:""},null,8,re)]),a("div",ce,C(e.data.name),1),a("div",{class:"collect",onClick:E(n,["stop"]),style:W({cursor:e.data.followed?"auto":"pointer"})},[a("span",{class:h(["iconfont",e.data.followed?"icon-heart-filled":"icon-heart"])},null,2)],4),a("div",ue,C(e.data.intro),1),a("div",_e,[s[0]||(s[0]=a("span",{class:"symbol"},"#",-1)),A(C(e.data.tag),1)]),e.data.friendType==2?(d(),r("div",ve,s[1]||(s[1]=[a("div",{class:"text"},"GPTs",-1)]))):$("",!0),e.data.friendType==3?(d(),r("div",pe,s[2]||(s[2]=[a("div",{class:"text"},"百炼应用",-1)]))):$("",!0),e.data.friendType==4||e.data.friendType==5?(d(),r("div",fe,s[3]||(s[3]=[a("div",{class:"text"},"扣子应用",-1)]))):$("",!0)]))}},we=S(me,[["__scopeId","data-v-37d30e05"]]);const ye=["onClick"],ge=150,xe=180,be={__name:"FriendList",props:["data"],emits:["followed","itemClick"],setup(b,{expose:f,emit:e}){const v=P("resize"),n=b,m=e,s=g({width:"150px"}),c=g(null),o=()=>{if(!c.value)return;const t=parseInt(window.getComputedStyle(c.value).width);if(v.smallRef.value)return s.value.width=(t-20)/2+"px";const y=Math.floor(t/ge),p=Math.floor(t/xe);let u=Math.max(y,p);u=u>5?5:u;const l=(t-5*2*u)/u;s.value.width=l+"px"};v.change(()=>{D(()=>o())});const x=t=>m("followed",t),I=t=>m("itemClick",t);return V(()=>{o()}),f({computedW:o}),(t,y)=>(d(),r("div",{class:"FriendList",ref_key:"wrapper",ref:c},[(d(!0),r(N,null,R(n.data,p=>(d(),r("div",{class:"item",key:p,style:W(s.value),onClick:u=>I(p)},[M(we,{data:p,onCollect:u=>x(p)},null,8,["data","onCollect"])],12,ye))),128))],512))}},Ce=S(be,[["__scopeId","data-v-6599ab79"]]);const ke={class:"content"},he={class:"rows"},$e={class:"lists"},Ie={__name:"index",setup(b){const f=g([]),e=g(!1),v=g(null),n=g(null),m=O(),s=U(),c=P("resize"),o=H(),I=J().appContext.config.globalProperties.$bus;let t=!1;const y=g({tag:""}),p=w=>F(this,null,function*(){f.value=yield Q(y.value),n.value&&D(()=>{n.value.computedW()}),e.value=!0}),u=()=>{v.value&&v.value.bodyClick()},l=T(()=>{let w=0;const _=o.tags.map(({count:k,name:L})=>(w+=k,{label:L,count:k,id:L}));return[{label:"全部",count:w,id:""},..._]}),i=w=>F(this,null,function*(){if(t)return;t=!0,e.value=!1;const _=l.value.find(k=>k.id==w.id);_&&(y.value.tag=_.id,yield X(200),yield p()),t=!1}),z=w=>F(this,null,function*(){if(t||w.followed)return;t=!0;const _=yield Y({friendId:w.id});if(_.err){t=!1,_.errMsg&&m.error(_.errMsg);return}const k=f.value.find(L=>L.id===w.id);k.followed=1,s.addFriends(_),I.emit("friendFollow",_),t=!1});return V(()=>F(this,null,function*(){yield p(),setTimeout(()=>K("AI_Plaza"),300)})),(w,_)=>(d(),r("div",{class:h(["FriendsPlaza",{small:G(c).smallRef.value}]),onClick:u},[a("div",ke,[_[0]||(_[0]=a("div",{class:"title"},"AI广场",-1)),_[1]||(_[1]=a("div",{class:"desc"},"精选高质量AI，使交流变得无限可能",-1)),a("div",he,[M(le,{ref_key:"tabsRef",ref:v,data:l.value,tIndex:y.value.tag,onTabChange:i},null,8,["data","tIndex"])]),a("div",$e,[a("div",{class:h(["list_wrapper",{show:e.value}])},[M(Ce,{ref_key:"friendRef",ref:n,data:f.value,onFollowed:z},null,8,["data"])],2)])])],2))}},Me=S(Ie,[["__scopeId","data-v-9899cdf2"]]);export{Me as default};
