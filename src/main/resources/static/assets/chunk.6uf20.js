var D=(i,_,t)=>new Promise((y,b)=>{var g=u=>{try{p(t.next(u))}catch(k){b(k)}},v=u=>{try{p(t.throw(u))}catch(k){b(k)}},p=u=>u.done?y(u.value):Promise.resolve(u.value).then(g,v);p((t=t.apply(i,_)).next())});import{_ as U,u as ee,l as T,c as h,o,a as n,e as s,C as j,A as S,ao as q,i as O,j as F,m as P,a8 as Y,Y as se,Z as te,v as a,f as m,D as R,d,cX as oe,cY as ne,cZ as ae,c_ as le,n as re,p as ie,V as ce,g as E,k as ue,W as de,q as _e,t as ve,F as pe,x as me,w as X,z as he,br as fe,B as xe}from"./bundle.0.0.2.js?v=0.9994225010119648";import{_ as ge}from"./chunk.6uf21.js";import{I as N}from"./chunk.6uf22.js";import{N as ke}from"./chunk.6uf23.js";const we=""+new URL("beta.31673cfa.svg",import.meta.url).href;const ye={class:"avater_wrapper flex_sx_center"},Ce={__name:"index",props:{size:{type:String,default:"28px"},text:{type:String,default:"TalkX"}},setup(i){ee(t=>({"880280a8":i.size}));const _=T();return h(()=>_.sending),(t,y)=>(o(),n("div",ye,[s("img",{style:j({width:i.size,height:i.size}),src:ge,alt:""},null,4),s("span",null,S(i.text),1)]))}},be=U(Ce,[["__scopeId","data-v-b73c146c"]]),$e={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},ze=s("g",null,[s("path",{d:`M460.6,147.3L353,256.9c-0.8,0.8-0.8,2,0,2.8l75.3,80.2c5.1,5.1,5.1,13.3,0,18.4c-2.5,2.5-5.9,3.8-9.2,3.8
		s-6.7-1.3-9.2-3.8l-75-79.9c-0.8-0.8-2.1-0.8-2.9,0l-18.3,18.6c-15.3,15.5-35.6,24.1-57.4,24.2c-22.1,0.1-43.1-9.2-58.6-24.9
		l-17.6-17.9c-0.8-0.8-2.1-0.8-2.9,0l-75,79.9c-2.5,2.5-5.9,3.8-9.2,3.8s-6.7-1.3-9.2-3.8c-5.1-5.1-5.1-13.3,0-18.4l75.3-80.2
		c0.7-0.8,0.7-2,0-2.8L51.4,147.3c-1.3-1.3-3.4-0.4-3.4,1.4L48,368c0,17.6,14.4,32,32,32h352c17.6,0,32-14.4,32-32l0-219.3
		C464,146.9,461.8,146.1,460.6,147.3z`}),s("path",{d:`M256,295.1c14.8,0,28.7-5.8,39.1-16.4L452,119c-5.5-4.4-12.3-7-19.8-7H79.9c-7.5,0-14.4,2.6-19.8,7l156.9,159.7
		C227.3,289.2,241.2,295.1,256,295.1z`})],-1),Le=[ze],Me=q({name:"IosMail",render:function(_,t){return o(),n("svg",$e,Le)}}),Re={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},Se=s("g",null,[s("g",null,[s("path",{d:`M256,48C141.6,48,48,141.6,48,256s93.6,208,208,208s208-93.6,208-208S370.4,48,256,48z M256,110.4\r
			c34.3,0,62.4,28.1,62.4,62.4s-28.1,62.4-62.4,62.4s-62.4-28.1-62.4-62.4S221.7,110.4,256,110.4z M256,410.8\r
			c-52,0-97.8-27-124.8-66.6c1-41.6,83.2-64.5,124.8-64.5s123.8,22.9,124.8,64.5C353.8,383.7,308,410.8,256,410.8z`})])],-1),Ie=[Se],De=q({name:"MdContact",render:function(_,t){return o(),n("svg",Re,Ie)}}),Ee={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","enable-background":"new 0 0 512 512","xml:space":"preserve"},Ne=s("g",null,[s("path",{d:`M256,48C141.2,48,48,141.2,48,256s93.2,208,208,208s208-93.2,208-208S370.8,48,256,48z M277,381h-42v-42h42V381z\r
		 M276.8,318h-41.6c0-67,62.4-62.2,62.4-103.8c0-22.9-18.7-41.7-41.6-41.7S214.4,192,214.4,214h-41.6c0-46,37.2-83,83.2-83\r
		c46,0,83.2,37.1,83.2,83.1C339.2,266.1,276.8,272,276.8,318z`})],-1),Ue=[Ne],Te=q({name:"MdHelpCircle",render:function(_,t){return o(),n("svg",Ee,Ue)}});const qe={class:"list"},Be={class:"text"},Ve={class:"text"},He={key:0,class:"dot"},We={key:0,class:"dot"},Xe={__name:"UserList",props:["show"],emits:["update:show"],setup(i,{emit:_}){const t=O("resize"),y=i,b=_,g=F();T();const v=P(),p=Y(),u=h(()=>v.isLogin),k=h(()=>!p.get("header_more_login")),$=h(()=>!p.get("header_notify")),z=window.__talkx__.openUrl;let w=!1;const l=f=>D(this,null,function*(){if(!w){switch(w=!0,f){case"notify":p.set({key:"header_notify",value:!0}),g.push({name:"notify"});break;case"theme":v.setTheme(le[v.theme].next);break;case"collect":g.push({name:t.smallRef.value?"favorites":"d_favorites"});break;case"login":const e=localStorage.getItem("dialogue_inviteCode");p.set({key:"header_more_login",value:!0});const r={name:u.value?"user":"login"};r.name=="login"&&e?r.query={inviteCode:e}:!t.smallRef.value&&r.name=="user"&&(r.name="d_user"),g.push(r);break;case"us":z(ae);break;case"ordinary":z(ne);break;case"about":z(oe);break;case"out":showToast("logout");break}w=!1,b("update:show",!1)}});return(f,e)=>se((o(),n("div",qe,[s("div",{class:"item flex_sx_center",onClick:e[0]||(e[0]=r=>l("theme"))},[e[7]||(e[7]=s("span",{class:"iconfont icon-theme-light-dark"},null,-1)),s("span",Be,"切换"+S(a(v).nextThemeName)+"主题",1)]),a(v).isLogin&&a(t).IDERef.value?d("",!0):(o(),n("div",{key:0,class:"item flex_sx_center",onClick:e[1]||(e[1]=r=>l("login"))},[m(a(N),{size:"20"},{default:R(()=>[m(a(De))]),_:1}),s("span",Ve,S(u.value?"个人中心":"去登录"),1),k.value?(o(),n("div",He)):d("",!0)])),s("div",{class:"item flex_sx_center",onClick:e[2]||(e[2]=r=>l("collect"))},e[8]||(e[8]=[s("span",{class:"iconfont icon-a-controlplatform"},null,-1),s("span",{class:"text"},"收藏夹",-1)])),s("div",{class:"item flex_sx_center",onClick:e[3]||(e[3]=r=>l("notify"))},[e[9]||(e[9]=s("span",{class:"iconfont icon-fuhao-tongzhi"},null,-1)),e[10]||(e[10]=s("span",{class:"text"},"消息通知",-1)),$.value?(o(),n("div",We)):d("",!0)]),s("div",{class:"item flex_sx_center",onClick:e[4]||(e[4]=r=>l("us"))},[m(a(N),{size:"20"},{default:R(()=>[m(a(Me))]),_:1}),e[11]||(e[11]=s("span",{class:"text"},"联系我们",-1))]),a(t).IDERef.value?(o(),n("div",{key:1,class:"item flex_sx_center",onClick:e[5]||(e[5]=r=>l("ordinary"))},e[12]||(e[12]=[s("span",{class:"iconfont icon-chrome"},null,-1),s("span",{class:"text"},"TalkX 通用版",-1)]))):d("",!0),s("div",{class:"item flex_sx_center",onClick:e[6]||(e[6]=r=>l("about"))},[m(a(N),{size:"20"},{default:R(()=>[m(a(Te))]),_:1}),e[13]||(e[13]=s("span",{class:"text"},"关于 TalkX",-1))])],512)),[[te,y.show]])}},je=U(Xe,[["__scopeId","data-v-6d6fa587"]]);const Oe={class:"left flex"},Fe={key:0,class:"headerlist flex"},Pe=["onClick"],Ye={key:0,class:"beta",src:we,alt:""},Ze={key:1,class:"user_info flex"},Ae=["src"],Qe={key:0,class:"right"},Ge={key:0,class:"dot"},Je={class:"listwrapper"},Ke={__name:"header",props:{hideRight:{default:!1}},setup(i){const t=re().appContext.config.globalProperties.$bus,y=i,{showToast:b,closeWatch:g,clearWatch:v}=ie(),{receive:p,send:u,clearReceive:k}=ce(),$=T(),z=h(()=>$.sending?"no-drop":"pointer"),w=E(""),l=F(),f=E(!1),e=E(!0),r=ue(),L=P(),B=O("resize"),V=Y(),I=h(()=>l.currentRoute.value.name);de(()=>{w.value=I.value});const M=h(()=>B.IDERef.value),Z=h(()=>!V.get("header_more")),A=h(()=>{const c=[{label:"对话",value:"dialogue"}];return M.value&&c.push({label:"SQL",value:"sqlchat",beta:!0}),c}),Q=()=>{$.sending||(V.set({key:"header_more",value:!0}),f.value=!f.value)},G=()=>l.push({name:"user",query:{origin:I.value}}),J=()=>l.push({name:"userEdit",query:{type:"my_hashrate"}}),K=c=>{if(c.value=="sqlchat"&&!L.isLogin){r.warning("请登录");return}w.value=c.value,l.push({name:c.value})},H=()=>f.value=!1,W=c=>{e.value=c};return _e(()=>{t.on("controllist",W),g("logout",c=>D(this,null,function*(){if(c){const C=l.currentRoute.value.name;yield L.logOut(),$.loginOutClear(),C=="dialogue"?t.emit("dialogue_event",{type:"logout"}):l.push({name:"dialogue",query:{type:"add"}})}})),document.addEventListener("click",H)}),ve(()=>{v(),k(),t.off("controllist",W),document.removeEventListener("click",H)}),(c,C)=>a(B).webWideRef.value?d("",!0):(o(),n("div",{key:0,class:X(["chat-header",{IDERef:M.value}])},[s("div",Oe,[m(be,{size:M.value?"20px":"28px",text:""},null,8,["size"]),M.value?(o(),n("div",Fe,[(o(!0),n(pe,null,me(A.value,x=>(o(),n("div",{class:X(["h-item",{select:w.value==x.value&&x.value==I.value}]),key:x.value,onClick:es=>K(x)},[he(S(x.label)+" ",1),x.beta?(o(),n("img",Ye)):d("",!0)],10,Pe))),128))])):d("",!0),a(L).user&&M.value?(o(),n("div",Ze,[s("div",{class:"coins",onClick:J},"🧄 "+S(a(L).user.coins),1),s("img",{class:"user_avater",onClick:G,src:a(L).user.avatar,alt:""},null,8,Ae)])):d("",!0)]),y.hideRight?d("",!0):(o(),n("div",Qe,[fe(c.$slots,"right",{},()=>[m(a(ke),{placement:"left-start",show:f.value,style:{padding:"4px","border-radius":"0px","background-color":"var(--tp_userList_bgcolor)"}},{trigger:R(()=>[s("div",null,[e.value?(o(),n("div",{key:0,class:"MdList hover_light hover_color",tabindex:"0",onClick:xe(Q,["stop"]),style:j({cursor:z.value})},[C[1]||(C[1]=s("span",{class:"iconfont icon-option-horizontal"},null,-1)),Z.value?(o(),n("div",Ge)):d("",!0)],4)):d("",!0)])]),default:R(()=>[s("div",Je,[m(je,{show:!0,"onUpdate:show":C[0]||(C[0]=x=>f.value=x)})])]),_:1},8,["show"])],!0)]))],2))}},ls=U(Ke,[["__scopeId","data-v-3ff42cd1"]]);export{ls as H,je as U};
